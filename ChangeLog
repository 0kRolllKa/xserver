2005-09-14  Eric Anholt  <anholt@FreeBSD.org>

	* configure.ac:
	* hw/xfree86/Makefile.am:
	* hw/xfree86/loader/Makefile.am:
	* hw/xfree86/xf8_32bpp/Makefile.am:
	Build xf8_32bpp, which is wanted by the mga driver, and export elf.h,
	which is wanted by the rendition driver.

2005-09-13  Eric Anholt  <anholt@FreeBSD.org>

	* configure.ac:
	* hw/xfree86/dri/Makefile.am:
	Turn on DRI by default on Linux, NetBSD, FreeBSD, and fix the build of
	the module for FreeBSD by setting some missing defines (XFree86Module,
	IN_MODULE) in the dri directory.  Note that those missing defines should
	be somewhere generic, since there are other consumers of them, but I
	haven't figured out where.

2005-09-13  Eric Anholt  <anholt@FreeBSD.org>

	* configure.ac:
	* hw/xfree86/Makefile.am:
	* hw/xfree86/os-support/bsd/Makefile.am:
	* include/dix-config.h.in:
	* include/xorg-config.h.in:
	* include/xorg-server.h.in:
	Add some initial BSD support for the xorg server.  Incomplete on NetBSD,
	OpenBSD, and non-i386/amd64 FreeBSD for sure.  Plus I haven't actually
	run it yet.

2005-09-12  Eric Anholt  <anholt@FreeBSD.org>

	* configure.ac:
	Don't define POSIX_SOURCE on any BSDs, since it breaks things.

	* hw/xfree86/int10/Makefile.am:
	Define NO_SYS_HEADERS, as the monolithic build does.  Helps FreeBSD.

	* hw/xfree86/x86emu/Makefile.am:
	Don't include validate.c in the library, since it seems to be a userland
	test program.

2005-09-12  Daniel Stone  <daniel@freedesktop.org>

	* configure.ac:
	Put DMX AC_CONDITIONALS at the top level, since they must always be
	called.  Add missing resourceproto, fontenc, and fontsproto to
	REQUIRED_MODULES.

	* configure.ac:
	* include/xorg-config.h.in:
	* include/xorg-server.h.in:
	Since we build vgahw unconditionally, always define WITH_VGAHW.

2005-09-09  Jürg Billeter  <j@bitron.ch>

	* configure.ac: use RGB_DB not RGB_PATH as that's what it's looking for

	* xkb/Makefile.am: define HAVE_XKB_CONFIG_H so setting xkb-path works

2005-09-02  Alan Coopersmith  <alan.coopersmith@sun.com>

	* configure.ac: 
	Use macros from xtrans.m4, issue error if not found.

2005-09-02  Daniel Stone  <daniel@freedesktop.org>

	* GL/mesa/X/Makefile.am:
	Add -include dix-config.h to CFLAGS so we pickup _XSERVER64 and other
	assorted vaguely useful macros; this unbreaks GLcore on amd64.

2005-09-01  Daniel Stone  <daniel@freedesktop.org>

	* configure.ac:
	* include/config.h.in:
	Make RGB_PATH configurable.

	* hw/xfree86/i2c/Makefile.am:
	Move I2C modules back to $(moduledir)/multimedia.

2005-08-30  Kristian Høgsberg  <krh@redhat.com>

	* hw/xfree86/dri/Makefile.am: 
	* hw/xfree86/os-support/drm/Makefile.am: Use the $(moduledir)
	makefile variable instead of @moduledir@ so it can be overridden
	at make install time.

	* xorg-server.pc.in: Remove driverdir and inputdir from pkg-config
	file.  The directory layout of moduledir is fixed and well known
	by drivers.

Thu Aug 25 17:15:01 2005  Søren Sandmann  <sandmann@redhat.com>

	* hw/xfree86/i2c/Makefile.am (module_LTLIBRARIES): Add all the
	drivers to the module_LTLIBRARIES instead of having separate 
	variables for them. Pointed out by Kristian Høgsberg.
	
2005-08-25  Kristian Høgsberg  <krh@redhat.com>

	* hw/xfree86/os-support/solaris/Makefile.am (EXTRA_DIST): Remove
	sun_inout.s so make dist works (discussed with Alan Coopersmith).

Wed Aug 24 15:39:07 2005  Søren Sandmann  <sandmann@redhat.com>

	* configure.ac: Add GLX_{INC,LIBS} for xprint.

	* hw/xfree86/dixmods/Makefile.am: Add @DIX_FLAGS@ to AM_CFLAGS

2005-08-24  Alan Coopersmith  <alan.coopersmith@sun.com>

	* configure.ac: 
	* hw/dmx/input/Makefile.am:
	Don't try to build dmx/input/lnx-*.c if <linux/keyboard.h> isn't found
	Don't try to build dmx/input/usb-*.c if <linux/input.h> isn't found

	* hw/dmx/Makefile.am: 
	Replace -rdynamic with $(LD_EXPORT_SYMBOLS_FLAG) for compatibility
	with compilers other than gcc
	
2005-08-22  Kevin E. Martin  <kem-at-freedesktop-dot-org>

	* configure.ac:
	Fix linking errors for xprint.

2005-08-21  Daniel Stone  <daniel@freedesktop.org>

	* configure.ac:
	Huge cleanup.  Group into sections: hardware feature detection,
	extension detection/configuration, DDX options.  Make building of Xorg
	DDX fully optional.  Clarify and correct some help texts.  Change all
	comments to use dnl instead of #.  Quote all tests correctly, and guard
	pure-variable tests with 'x' (e.g. test $DMX = yes -> test "x$DMX" =
	xyes).  Since the DDXes seem to have pretty divergent extension support
	these days, get rid of EXTENSION_LIBS, DMX_EXTENSIONS and
	XPRINT_EXTENSIONS, and go back to building extension lists by hand in
	the DDX-specific sections.  Use portable POSIX constructs everywhere
	(e.g. test foo && test bar, instead of test foo -a bar).

	* configure.ac:
	Set _XSERVER64 on 64-bit architectures, and use x86_64 for host_cpu
	instead of amd64 (Jürg Billeter).
	
	* configure.ac:
	* hw/xfree86/loader/Makefile.am:
	* hw/xfree86/os-support/bus/Makefile.am:
	Add test for SPARC.  Build SparcMulDiv.S, sparcPci.c, and Sbus.c on
	all SPARCs; use xorg_bus_sparc instead of xorg_bus_sbus.

	* configure.ac:
	Make the default font path configurable.

2005-08-20  Adam Jackson  <ajax@freedesktop.org>

	* hw/xfree86/os-support/bus/Makefile.am:
	Add sparcPci.c to EXTRA_DIST.

2005-08-20  Daniel Stone  <daniel@freedesktop.org>

	* configure.ac:
	Make symlink-mesa.sh usage srcdir != objdir safe.
	Remove requirement for XF86Rush protocol headers, which we don't even
	use in the core server.

	* configure.ac:
	* xkb/Makefile.am:
	* hw/xfree86/Makefile.am:
	* hw/xfree86/dixmods/Makefile.am:
	Build libxkbstubs.la to stub XKB DDX functions (e.g. VT switches), and
	build libxorggxkb.la from within the Xorg DDX to replace the previous
	xf86VT.o, et al, hacks.

	* configure.ac:
	* GL/**/Makefile.am:
	* hw/xfree86/dri/Makefile.am:
	Make DRI/GLcore builds srcdir != builddir safe, and invoke
	symlink-mesa.sh in our builddir, not our srcdir.

2005-08-19  Søren Sandmann  <sandmann@redhat.com>

	* fb/Makefile.am (libfbmmx_la_CFLAGS): Move fbmmx to a convenience
	library since the mmx flags may be harmful when applied to non-mmx
	code.

2005-08-17  Søren Sandmann  <sandmann@redhat.com>

	* Xext/Makefile.am: Conditionally compile in xprint.c

	* Makefile.am, configure.ac: Add Xprint

2005-08-16  Søren Sandmann  <sandmann@redhat.com>

	* hw/xfree86/dixmods/Makefile.am: Add ft and type1 modules.

2005-08-15  Søren Sandmann  <sandmann@redhat.com>

	* hw/xfree86/dixmods/extmod/Makefile.am (libextmod_la_LIBADD):
	Link this module with libXext.la.

Mon Aug 15 14:56:57 2005  Søren Sandmann  <sandmann@redhat.com>

	* hw/xfree86/dixmods/Makefile.am (libdixmods_la_SOURCES): Remove
	the xkb* files.

	* hw/xfree86/Makefile.am (Xorg_LDADD): Add xkbVT.o and friends as
	the last things on the link line so they will override the symbols
	in libxkb.a.  Add a comment on how this situation might not be
	considered ideal.

2005-08-08  Søren Sandmann  <sandmann@redhat.com>

	* include/xorg-config.h.in: #undef PIXPRIV here.

2005-08-07  Keith Packard  <keithp@keithp.com>

	* include/dix-config.h.in:
	Re-add _XOPEN_SOURCE as it's needed *sometimes*.
	Place it in #ifndef to avoid whinging.

2005-08-07  Keith Packard  <keithp@keithp.com>

	* .cvsignore:
	* GL/mesa/X/.cvsignore:
	* Xext/extmod/.cvsignore:
	* afb/.cvsignore:
	* cfb/.cvsignore:
	* cfb16/.cvsignore:
	* cfb24/.cvsignore:
	* cfb32/.cvsignore:
	* hw/dmx/.cvsignore:
	* hw/dmx/config/.cvsignore:
	* hw/vfb/.cvsignore:
	* hw/xfree86/.cvsignore:
	* hw/xfree86/common/.cvsignore:
	* hw/xfree86/dixmods/.cvsignore:
	* hw/xfree86/exa/.cvsignore:
	* hw/xfree86/os-support/linux/drm/.cvsignore:
	* hw/xfree86/ramdac/.cvsignore:
	* hw/xfree86/scanpci/.cvsignore:
	* hw/xfree86/x86emu/.cvsignore:
	* hw/xfree86/xaa/.cvsignore:
	* hw/xfree86/xf1bpp/.cvsignore:
	* hw/xfree86/xf4bpp/.cvsignore:
	* hw/xnest/.cvsignore:
	* include/.cvsignore:
	* mfb/.cvsignore:
	Add autogenerated source files and other
	various non-CVS material to .cvsignore files
	
	* hw/xfree86/exa/Makefile.am:
	Use XORG_CFLAGS.  Ensure that all exa files are in SOURCES
	
	* include/dix-config.h.in:
	remove _XOPEN_SOURCE as it's always in xtrans.pc these days
	and gcc whines
	
	* configure.ac:
	libdamage.la needs libcw.la when COMPOSITE is defined,
	but that libdamage.la must be after libcomposite.la, so
	add libcw.la to DAMAGE_LIB instead of EXTENSION_LIBS.
	Regularize library link order across all X servers

2005-08-07  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	Invert the sense of the composite configure flag to match reality.

2005-08-07  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	* miext/damage/Makefile.am:
	Bug #3989: Fix Composite builds, enable Composite build by default.
	(Olli Helenius)

2005-08-04  Adam Jackson  <ajax@freedesktop.org>

	* hw/xfree86/common/Makefile.am:
	* hw/xfree86/os-support/bus/Makefile.am:
	EXTRA_DIST hacks to get all the OS support files into the tarball.

2005-08-04  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	* GL/Makefile.am:
	* GL/include/Makefile.am:
	* GL/include/GL/Makefile.am:
	* hw/xfree86/os-support/solaris/Makefile.am:
	* hw/xfree86/scanpci/Makefile.am:
	- Bug #3960: Add remaining GLX and pci.ids stuff to DIST
	  (Cha Young-Ho, Olli Helenius)
	- Fix some distcheck problems for non-solaris systems
	- Change server version number from the Xorg rev to an independent one
	- _POSIX_SOURCE and _XOPEN_SOURCE defined to the right values

2005-08-04  Adam Jackson  <ajax@freedesktop.org>

	* configure.ac:
	* GL/mesa/main/Makefile.am:
	- Check for vsnprintf
	- Don't build the Xorg DDX on darwin
	- Workaround for gcc defining __ppc__ but not __powerpc__

2005-08-02  Keith Packard  <keithp@keithp.com>

	* hw/xwin/Makefile.am:
	Mark generated files as BUILT_SOURCES and CLEANFILES
	to ensure they are regenerated after 'make clean' and
	to make parallel builds work right.

2005-08-01  Keith Packard  <keithp@keithp.com>

	* hw/dmx/config/Makefile.am:
	Note yacc and lex generated files as BUILT_SOURCES so
	they are created before anything is compiled; required
	for parallel builds

2005-07-06  Alexander Gottwald  <ago@freedesktop.org>

	* configure.ac:
	* Makefile.am:
	* include/dix-config.h:
	Add more defines for XWin DDX
	Make building of cfb*, afb and mfb conditional
	Set FD_SETSIZE=256 on cygwin
	
2005-07-05  Alexander Gottwald  <ago@freedesktop.org>

	* hw/xwin/Makefile.am:
	Build miinitext.c and fbcmap.c as DDX specific files

	* configure.ac:
	Do not define _POSIX_SOURCE on cygwin.

2005-07-05  Alexander Gottwald  <ago@freedesktop.org>

	* fb/Makefile.am:
	* mi/Makefile.am:
	* xkb/Makefile.am:
	Revert last changes. They have to be addressed in a different way

2005-07-05  Alexander Gottwald  <ago@freedesktop.org>

	* configure.ac:
	* hw/Makefile.am:
	Add XWin DDX, make Xorg DDX conditional
	Make XF86VidMode and XF86Misc conditional

	* include/xwin-config.h.in:
	* hw/xwin/Makefile.am:
	Add XWin DDX

	* include/dix-config.h.in:
	Added DDXTIME, DDXOSFATALERROR, DDXOSVERRORF and DDXBEFORERESET

	* fb/Makefile.am:
	Added fbcmap.c

	* mi/Makefile.am:
	Added miinitext.c

	* xkb/Makefile.am:
	Added -I$(top_srcdir)/Xext/extmod to INCLUDES

2005-07-02  Daniel Stone  <daniel@freedesktop.org>

	* acinclude.m4:
	* autogen.sh:
	* configure.ac:
	* **/Makefile.am:
	* xorg-server.pc.in:
	Initial build system checked in.
